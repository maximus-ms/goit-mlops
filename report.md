
## Аналіз результатів

### Розміри образів
```bash
$ docker images
REPOSITORY            TAG        IMAGE ID       CREATED          SIZE
pythorch-inter-slim   latest     3f218bc6278c   3 minutes ago    7.01GB
pythorch-inter-fat    latest     8275d748351a   30 minutes ago   7.98GB
python                3.9        239b4550132d   7 weeks ago      1.09GB
python                3.9-slim   56cea0119ab6   7 weeks ago      120MB
```
Як бачимо, різниця між Fat та Slim образами не суттєва: 7.98GB проти 7.01GB відповідно. Приблизно саме така різниця у розмірі між базовими образами: python:3.9 та python:3.9-slim.

### Кількість шарів
```bash
$ docker inspect -f '{{json .RootFS.Layers}}' pythorch-inter-fat | jq length
16
```
```bash
$ docker inspect -f '{{json .RootFS.Layers}}' pythorch-inter-slim | jq length
9
```
Як бачимо у Slim моделі меньша кількість шарів, що впливає на час збірки самого образу, та не стільки на його розмір. Але отримати меньший розмір нам допомогла дво-етапна збірка.

### Можливі покращення/оптимізації
 - `RUN mkdir -p /app` - ця операція зайва, адже `WORKDIR /app` автоматично створює директорію якщо її не існує.
 - `RUN mkdir -p /data` - створення директорії зайве, адже всеодно очікується, що ця директорія буде змонтована при запуску образа.
 - перевірити чи дійсно потрібні бібліотеки `libglib2.0-0`, `libsm6`, `libxrender1`, `libxext6`, враховуючи що вони встановлюються на першій стадії (при збірці slim образа), є ймовірність що буде працювати і без них
 - фіксувати версії в [requirements.txt](./requirements.txt)
 - якщо ми знаємо, що наша модель буде запускатися виключно на CPU (без використання GPU), то можна встановлювати відповідні легші пакети `torch`
 - реорганізувати додаток, щоб все розміщувалося в одні директорії `app` і копіювати все однією командою
 - додати `.dockerignore` для можливості виключти файли що не релевантні для продакшену.
